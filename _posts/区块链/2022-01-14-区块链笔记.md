---
date: 2022-01-14
tag: 区块链
key: blockchain.20201021
status: public
title: 区块链笔记
---

## 定义

区块链可以从狭义和广义两个层面来看待。

狭义上，区块链是一种以区块为基本单位的链式数据结构，区块中利用数字摘要对之前的交易历史进行校验，适合分布式记账场景下防篡改和可扩展性的需求。

广义上，区块链还指代基于区块链结构实现的分布式记账技术，包括分布式共识、隐私与安全保护、点对点通信技术、网络协议、智能合约等。

### 基本原理

+ 交易(Transaction)：一次对账本的操作
+ 区块(Block)：记录一段时间内的所有交易和结果，是一次共识
+ 链(Chain)：所有区块按顺序串联，是整个账本的日志记录

区块链的目标是实现一个分布的数据记录账本，这个账本只允许添加、不允许删除。账本底层的基本结构是一个线性的链表。链表由一个个“区块”串联组成，后继区块中记录前导区块的哈希（Hash）值。某个区块（以及块里的交易）是否合法，可通过计算哈希值的方式进行快速检验。网络中节点可以提议添加一个新的区块，但必须经过共识机制来对区块达成确认。

### 工作过程

1. 用户发起交易请求，消息广播到比特币网络中等待确认
2. 网络中的节点会将收到的等待确认的交易请求打包在一起，添加上前一个区块头部的哈希值等信息，组成一个区块结构。
3. 网络中的节点试图找到一个 nonce 串(随机串)放到区块里，使得区块结构的哈希结果满足一定条件(比如小于某个值)。这个计算 nonce 串的过程，即俗称的“挖矿”。nonce 串的查找需要花费一定的计算力。
4. 一旦节点找到了满足条件的 nonce 串，这个区块在格式上就“合法”了，成为候选区块。节点将其在网络中广播出去。其它节点收到候选区块后进行验证，发现确实合法，就承认这个区块是一个新的合法区块，并添加到自己维护的本地区块链结构上。当大部分节点都接受了该区块后，意味着区块被网络接受，区块中所包括的交易也就得到确认。

这里比较关键的步骤有两个，一个是完成对一批交易的共识(创建合法区块结构)；一个是新的区块添加到链结构上，被网络认可，确保未来无法被篡改。